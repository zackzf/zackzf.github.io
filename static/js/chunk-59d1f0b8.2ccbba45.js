(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59d1f0b8"],{"7f89":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"small_title"},[t._v("关键指标")]),s("el-row",{attrs:{gutter:0}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("div",[s("div",[t._v("独立用户(UV)")]),s("div",{staticClass:"dataNum"},[t._v("253")]),s("div",[t._v(" 日 "),s("i",{class:2!==t.kpis.separateUserType?0===t.kpis.separateUserType?"el-icon-top top-rise":"el-icon-bottom top-down":""}),s("span",[t._v(t._s(t.kpis.separateUserPercentage)+"%")])])]),s("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-unique-visitor"}})])])]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("div",[s("div",[t._v("问答总数")]),s("div",{staticClass:"dataNum"},[t._v("2728")]),s("div",[t._v(" 日 "),s("i",{class:2!==t.kpis.questionAndAnswerType?0===t.kpis.questionAndAnswerType?"el-icon-top top-rise":"el-icon-bottom top-down":""}),2==t.kpis.questionAndAnswerType?s("span",[t._v(" "+t._s(t.kpis.questionAndAnswerPercentage)+" ")]):s("span",[t._v(t._s(t.kpis.questionAndAnswerPercentage)+"%")])])]),s("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-qa-round"}})])])]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("div",[s("div",[t._v("访问次数(VV)")]),s("div",{staticClass:"dataNum"},[t._v("152")]),s("div",[t._v(" 日 "),s("i",{class:2!==t.kpis.accessType?0===t.kpis.accessType?"el-icon-top top-rise":"el-icon-bottom top-down":""}),2===t.kpis.accessType?s("span",[t._v(" "+t._s(t.kpis.accessPercentage)+" ")]):s("span",[t._v(t._s(t.kpis.accessPercentage)+"%")])])]),s("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-visit-time"}})])])]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("div",[s("div",[t._v("平均问答轮数(CPS)")]),s("div",{staticClass:"dataNum"},[t._v("152")]),s("div",[t._v(" 日 "),s("i",{class:2!==t.kpis.avgQuestionAndAnswerType?0===t.kpis.avgQuestionAndAnswerType?"el-icon-top top-rise":"el-icon-bottom top-down":""}),2==t.kpis.avgQuestionAndAnswerType?s("span",[t._v(" "+t._s(t.kpis.avgQuestionAndAnswerPercentage)+" ")]):s("span",[t._v(t._s(t.kpis.avgQuestionAndAnswerPercentage)+"%")])])]),s("svg",{staticClass:"icon svg-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-bianzu16"}})])])])],1),t._m(0),t._m(1),s("div",{staticClass:"block-line"},[t._m(2),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{align:"center",label:"序号",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.currentPage-1)*t.pagesize+e.$index+1))]}}])}),s("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.date.split(" ")[1])+" ")]}}])}),s("el-table-column",{attrs:{label:"高频问题","min-width":"120",align:"center",prop:"intentionInfoName","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{label:"独立用户UV",align:"center",prop:"separateUserCount"}}),s("el-table-column",{attrs:{label:"访问次数VV",align:"center",prop:"access"}}),s("el-table-column",{attrs:{align:"center",prop:"questionAndAnswer",label:"问答总数"}}),s("el-table-column",{attrs:{align:"center",prop:"avgQuestionAndAnswer",label:"平均会话轮数"}}),s("el-table-column",{attrs:{align:"center",prop:"avgQuestionAndAnswer",label:"平均问答数"}})],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout-inline-flex margin-b10"},[s("span",{staticClass:"small_title"},[t._v("小时指标")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"block-line"},[s("div",{staticClass:"split-title"},[s("span",[t._v("趋势图")])]),s("div",{staticStyle:{width:"100%",height:"300px"},attrs:{id:"echart-line1"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"split-title"},[s("span",[t._v("详细数据")])])}],i=s("a34a"),r=s.n(i);function o(t,e,s,a,n,i,r){try{var o=t[i](r),c=o.value}catch(l){return void s(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,s=arguments;return new Promise((function(a,n){var i=t.apply(e,s);function r(t){o(i,a,n,r,c,"next",t)}function c(t){o(i,a,n,r,c,"throw",t)}r(void 0)}))}}var l={name:"Table",filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{kpis:{},kpisValue:{},total:0,pagesize:5,currentPage:1,list:[],listLoading:!0,initedBol:!1,checkList:["独立用户(UV)","问答总数","访问次数(VV)","平均问答轮数(CPS)"],chart:null,options:{tooltip:{trigger:"axis"},grid:{x2:100},legend:{data:["独立用户(UV)","问答总数","访问次数(VV)","平均问答轮数(CPS)"],orient:"horizontal",right:80,top:10,show:!0},calculable:!0,xAxis:[{show:!0,type:"category",boundaryGap:!0,data:["00:00:00","01:00:00","02:00:00","03:00:00","04:00:00","05:00:00","06:00:00","07:00:00","08:00:00","09:00:00","10:00:00","11:00:00","12:00:00","13:00:00","14:00:00","15:00:00","16:00:00","17:00:00","18:00:00","19:00:00","20:00:00","21:00:00","22:00:00","23:00:00"]}],yAxis:[{name:"浏览量(PV)",type:"value"}],series:[{name:"独立用户(UV)",type:"line",data:[],selected:!1},{name:"问答总数",type:"line",data:[]},{name:"访问次数(VV)",type:"line",data:[]},{name:"平均问答轮数(CPS)",type:"line",data:[]}]}}},computed:{botId:function(){return this.$store.state.user.botId}},watch:{botId:function(t,e){t!==e&&this.init()}},mounted:function(){var t=this;this.$nextTick((function(){t.init()}))},methods:{init:function(){var t=this;t.chart=this.$echarts.init(document.getElementById("echart-line1")),t.chart.setOption(t.options),window.addEventListener("resize",t.handleResize),t.getSelectCrucial(),t.getSelectDataStatistics()},displayTime:function(){var t=new Date,e=t.getHours()>9?t.getHours():"0"+t.getHours(),s=t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes(),a=t.getSeconds()>9?t.getSeconds():"0"+t.getSeconds();return e+":"+s+":"+a},getSelectCrucial:function(){var t=this;return c(r.a.mark((function e(){var s,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={botId:t.$store.state.user.botId},e.next=3,t.$API.getSelectCrucial(s);case 3:a=e.sent,200===a.code&&(t.kpis=a.data.crucialDataPercentage||[],t.kpisValue=a.data.hourDataStatistics||[]),401===a.code&&(t.$message({message:a.message||"未登录或者登录失效",type:"error",duration:3e3}),t.$router.push({path:"/"}));case 6:case"end":return e.stop()}}),e)})))()},getSelectDataStatistics:function(){var t=this;return c(r.a.mark((function e(){var s,a,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={botId:t.$store.state.user.botId,pageNum:1,pageSize:50},a=t,e.next=4,t.$API.getSelectDataStatistics(s);case 4:if(n=e.sent,401!==n.code){e.next=10;break}return t.$message({message:n.message||"未登录或者登录失效",type:"error",duration:3e3}),t.$cookie.remove("_token"),t.$router.push({path:"/"}),e.abrupt("return",!1);case 10:a.options.series[0].data=new Array(24).fill(0),a.options.series[1].data=new Array(24).fill(0),a.options.series[2].data=new Array(24).fill(0),a.options.series[3].data=new Array(24).fill(0),200===n.code&&n.data&&(t.statistics=n.data,n.data.length>0&&(a.options.xAxis[0].data.forEach((function(e,s){t.statistics.map((function(t,n){-1!==t.date.indexOf(e)&&(a.options.series[0].data[s]=t.separateUserCount,a.options.series[1].data[s]=t.questionAndAnswer,a.options.series[2].data[s]=t.access,a.options.series[3].data[s]=t.avgQuestionAndAnswer)}))})),a.$nextTick((function(){a.chart.setOption(a.options)}))),a.total=t.statistics.length,a.list=t.statistics),200!==n.code||n.data||(a.$nextTick((function(){a.chart.setOption(a.options)})),a.total=0,a.list=[]),a.listLoading=!1;case 17:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t},handleResize:function(){this.chart.resize()},current_change:function(t){this.currentPage=t}}},u=l,d=(s("ecc3"),s("2877")),p=Object(d["a"])(u,a,n,!1,null,"2b933b82",null);e["default"]=p.exports},a198:function(t,e,s){},ecc3:function(t,e,s){"use strict";var a=s("a198"),n=s.n(a);n.a}}]);